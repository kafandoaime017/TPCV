# Activer le moteur de réécriture
RewriteEngine On

# Redirection des URLs avec .html vers leur version sans .html
RewriteCond %{THE_REQUEST} \s/([^\s]+)\.html [NC]
RewriteRule ^ /%1 [R=301,L]

# Empêcher l'accès direct aux fichiers .html
RewriteCond %{REQUEST_URI} \.html$ [NC]
RewriteRule ^ - [F]

# Réécriture pour servir le bon fichier
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ $1.html [L]

# Gestion des erreurs 404
ErrorDocument 404 /404.html

# Désactiver l'indexation des répertoires
Options -Indexes

# Sécurité : Empêcher l'accès direct aux fichiers PHP
<FilesMatch "\.php$">
    Require all denied
</FilesMatch>

# Ajouter une balise canonical pour éviter la duplication
<IfModule mod_headers.c>
    Header set Link "<https://ton-site.com/%{REQUEST_URI}>; rel=\"canonical\"" env=REDIRECT_STATUS
</IfModule>
